import{_ as P}from"./graph-logo-Dt0DBtTi.js";import{r as g,a as b,c as x,o as y,b as n,d as o,w as a,e as u,u as E,f as p,E as c}from"./index-B3ZjBOUV.js";import{u as R}from"./index-BE28LO_H.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={class:"register-container"},F={class:"register-box"},M={class:"login-link"},U={__name:"Register",setup(q){const w=E(),i=g(null),m=g(!1),s=b({username:"",password:"",confirmPassword:"",rememberMe:!0}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,validator:(t,e,r)=>{e===""?r(new Error("请输入密码")):(s.confirmPassword!==""&&i.value.validateField("confirmPassword"),r())},trigger:"blur"},{min:6,message:"密码长度至少为 6 个字符",trigger:"blur"}],confirmPassword:[{required:!0,validator:(t,e,r)=>{e===""?r(new Error("请再次输入密码")):e!==s.password?r(new Error("两次输入密码不一致")):r()},trigger:"blur"}]},v=async()=>{var t,e;if(i.value)try{await i.value.validate(),m.value=!0;const r={username:s.username,password:s.password,rememberMe:s.rememberMe};await R.register(r),c.success("注册成功，请登录"),w.push("/login")}catch(r){console.error("注册失败:",r),c.error(((e=(t=r.response)==null?void 0:t.data)==null?void 0:e.message)||"注册失败，请稍后再试")}finally{m.value=!1}};return(t,e)=>{const r=u("el-input"),d=u("el-form-item"),f=u("el-button"),V=u("el-form");return y(),x("div",C,[n("div",F,[e[7]||(e[7]=n("div",{class:"logo"},[n("img",{src:P,alt:"TGraph Logo",class:"graph-logo"}),n("h1",null,"TGraph"),n("p",null,"创建新账号")],-1)),o(V,{model:s,rules:_,ref_key:"registerFormRef",ref:i,class:"register-form"},{default:a(()=>[o(d,{prop:"username"},{default:a(()=>[o(r,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.username=l),placeholder:"用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(d,{prop:"password"},{default:a(()=>[o(r,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=l=>s.password=l),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(d,{prop:"confirmPassword"},{default:a(()=>[o(r,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=l=>s.confirmPassword=l),type:"password",placeholder:"确认密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(d,null,{default:a(()=>[o(f,{type:"primary",loading:m.value,onClick:v,class:"register-button"},{default:a(()=>e[4]||(e[4]=[p(" 注册 ")])),_:1},8,["loading"])]),_:1}),n("div",M,[e[6]||(e[6]=p(" 已有账号? ")),o(f,{type:"text",onClick:e[3]||(e[3]=l=>t.$router.push("/login"))},{default:a(()=>e[5]||(e[5]=[p("去登录")])),_:1})])]),_:1},8,["model"])])])}}},$=k(U,[["__scopeId","data-v-32fccf21"]]);export{$ as default};
