import{_ as k}from"./graph-logo-Dt0DBtTi.js";import{r as g,a as x,c as y,o as L,b as a,d as o,w as s,e as n,u as C,f as p,E as c}from"./index-B3ZjBOUV.js";import{u as M}from"./index-BE28LO_H.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"login-container"},E={class:"login-box"},F={__name:"Login",setup(I){const _=C(),d=g(null),i=g(!1),r=x({username:"",password:"",rememberMe:!0}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},v=async()=>{var u,e;if(d.value)try{await d.value.validate(),i.value=!0;const l=await M.login(r);localStorage.setItem("token","logged-in"),localStorage.setItem("username",r.username),c.success("登录成功"),_.push("/select-database")}catch(l){console.error("登录失败:",l),c.error(((e=(u=l.response)==null?void 0:u.data)==null?void 0:e.message)||"登录失败，请检查用户名和密码")}finally{i.value=!1}};return(u,e)=>{const l=n("el-input"),m=n("el-form-item"),w=n("el-checkbox"),f=n("el-button"),V=n("el-form");return L(),y("div",B,[a("div",E,[e[7]||(e[7]=a("div",{class:"logo"},[a("img",{src:k,alt:"TGraph Logo",class:"graph-logo"}),a("h1",null,"TGraph"),a("p",null,"图数据库管理系统")],-1)),o(V,{model:r,rules:b,ref_key:"loginFormRef",ref:d,class:"login-form"},{default:s(()=>[o(m,{prop:"username"},{default:s(()=>[o(l,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=t=>r.username=t),placeholder:"用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(m,{prop:"password"},{default:s(()=>[o(l,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=t=>r.password=t),type:"password",placeholder:"密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(m,null,{default:s(()=>[o(w,{modelValue:r.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=t=>r.rememberMe=t)},{default:s(()=>e[4]||(e[4]=[p("记住我")])),_:1},8,["modelValue"]),o(f,{type:"text",onClick:e[3]||(e[3]=t=>u.$router.push("/register")),class:"register-link"},{default:s(()=>e[5]||(e[5]=[p(" 注册账号 ")])),_:1})]),_:1}),o(m,null,{default:s(()=>[o(f,{type:"primary",loading:i.value,onClick:v,class:"login-button"},{default:s(()=>e[6]||(e[6]=[p(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},G=U(F,[["__scopeId","data-v-0f197fd5"]]);export{G as default};
