import{r as g,a as G,g as E,c as d,o as l,b as e,d as s,w as t,e as r,E as b,C as i,i as h,v as I,x as L,F as T,l as y,G as w,H as k,h as x,f as R,k as D}from"./index-B3ZjBOUV.js";import{l as F,r as V,n as M}from"./index-BE28LO_H.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"graph-view-container"},j={class:"graph-header"},q={class:"card-header"},z={class:"card-content"},J={class:"stat-number"},K={class:"card-header"},O={class:"card-content"},P={class:"stat-number"},Q={class:"card-header"},U={class:"card-content"},W={class:"stat-number"},X={class:"card-header"},Y={key:0,class:"info-section"},Z={key:1,class:"info-section"},$={__name:"GraphView",setup(ee){const u=g([]),f=g([]),n=G({nodeCount:0,relationshipCount:0,labelCount:0}),m=async()=>{try{const _=await F.getAllLabels();u.value=_.data||[],n.labelCount=u.value.length;const a=await V.getRelationshipTypes();f.value=a.data||[];try{const o=await M.getNodesCount();n.nodeCount=parseInt(o.data)||0}catch(o){console.error("获取节点总数失败:",o),n.nodeCount=0}try{const o=await V.getRelationshipsCount();n.relationshipCount=parseInt(o.data)||0}catch(o){console.error("获取关系总数失败:",o),n.relationshipCount=0}b.success("数据统计刷新成功")}catch(_){console.error("加载图数据失败:",_),b.error("加载图数据失败，请检查后端服务是否正常运行")}};return E(()=>{m()}),(_,a)=>{const o=r("el-icon"),p=r("el-card"),v=r("el-col"),N=r("el-row"),A=r("el-button"),B=r("el-tooltip"),C=r("el-tag");return l(),d("div",S,[e("div",j,[s(N,{gutter:20},{default:t(()=>[s(v,{span:8},{default:t(()=>[s(p,{shadow:"hover"},{header:t(()=>[e("div",q,[s(o,null,{default:t(()=>[s(h(I))]),_:1}),a[0]||(a[0]=e("span",null,"节点总数",-1))])]),default:t(()=>[e("div",z,[e("span",J,i(n.nodeCount),1)])]),_:1})]),_:1}),s(v,{span:8},{default:t(()=>[s(p,{shadow:"hover"},{header:t(()=>[e("div",K,[s(o,null,{default:t(()=>[s(h(L))]),_:1}),a[1]||(a[1]=e("span",null,"关系总数",-1))])]),default:t(()=>[e("div",O,[e("span",P,i(n.relationshipCount),1)])]),_:1})]),_:1}),s(v,{span:8},{default:t(()=>[s(p,{shadow:"hover"},{header:t(()=>[e("div",Q,[s(o,null,{default:t(()=>[s(h(T))]),_:1}),a[2]||(a[2]=e("span",null,"标签总数",-1))])]),default:t(()=>[e("div",U,[e("span",W,i(n.labelCount),1)])]),_:1})]),_:1})]),_:1})]),s(p,{class:"additional-info-card"},{header:t(()=>[e("div",X,[a[3]||(a[3]=e("span",null,"数据库概览",-1)),e("div",null,[s(B,{content:"刷新数据",placement:"top"},{default:t(()=>[s(A,{type:"primary",icon:h(D),circle:"",onClick:m},null,8,["icon"])]),_:1})])])]),default:t(()=>[u.value.length>0?(l(),d("div",Y,[a[4]||(a[4]=e("h3",null,"数据库标签",-1)),(l(!0),d(w,null,k(u.value,c=>(l(),x(C,{key:c,class:"label-tag",type:"info",effect:"plain"},{default:t(()=>[R(i(c),1)]),_:2},1024))),128))])):y("",!0),f.value.length>0?(l(),d("div",Z,[a[5]||(a[5]=e("h3",null,"关系类型",-1)),(l(!0),d(w,null,k(f.value,c=>(l(),x(C,{key:c,class:"relation-tag",type:"success",effect:"plain"},{default:t(()=>[R(i(c),1)]),_:2},1024))),128))])):y("",!0)]),_:1})])}}},oe=H($,[["__scopeId","data-v-c74fcfb6"]]);export{oe as default};
